{% extends "base.html" %}

{% block title %}ç¾è‚¡è”åŠ¨é€‰è‚¡ - è‚¡ç¥¨åˆ†æç³»ç»Ÿ{% endblock %}

{% block content %}
<div class="hero">
    <h2>ğŸŒ ç¾è‚¡-Aè‚¡è”åŠ¨ç­–ç•¥</h2>
    <p class="subtitle">è·Ÿè¸ªç¾è‚¡æ¿å—çƒ­åº¦ï¼Œæ•æ‰Aè‚¡è”åŠ¨æœºä¼š</p>
</div>

<div class="dashboard">
    <!-- æ—¥æœŸé€‰æ‹© -->
    {% if available_dates %}
    <div class="card" style="padding: 15px; margin-bottom: 20px;">
        <form method="get" style="display: flex; align-items: center; gap: 10px;">
            <label><strong>ğŸ“… é€‰æ‹©æ—¥æœŸ:</strong></label>
            <select name="date" onchange="this.form.submit()"
                style="padding: 8px 12px; border-radius: 6px; border: 1px solid #444; background: #1a1a2e; color: #eee; font-size: 14px;">
                {% for d in available_dates %}
                <option value="{{ d }}" {% if d==selected_date %}selected{% endif %}>{{ d }}</option>
                {% endfor %}
            </select>
        </form>
    </div>
    {% endif %}

    <!-- æ¨èåˆ—è¡¨ -->
    <div class="card">
        <h3>ğŸ¯ ç¾è‚¡è”åŠ¨æ¨è ({{ selected_date or 'æš‚æ— ' }})</h3>
        {% if picks %}
        <table class="stock-table">
            <thead>
                <tr>
                    <th>è‚¡ç¥¨ä»£ç </th>
                    <th>è‚¡ç¥¨åç§°</th>
                    <th>ç°ä»·</th>
                    <th>æ¶¨è·Œå¹…</th>
                    <th>æ¥æº</th>
                    <th>è¯¦æƒ…</th>
                </tr>
            </thead>
            <tbody>
                {% for stock in picks %}
                <tr>
                    <td><strong>{{ stock.code }}</strong></td>
                    <td>{{ stock.name }}</td>
                    <td>Â¥{{ "%.2f"|format(stock.price) }}</td>
                    <td style="color: {{ '#4ecb71' if stock.change_pct > 0 else '#ff6b6b' }}">
                        {{ "%+.2f"|format(stock.change_pct) }}%
                    </td>
                    <td><span class="badge" style="background: linear-gradient(135deg, #667eea, #764ba2);">{{
                            stock.reason }}</span></td>
                    <td><a href="/stock/{{ stock.code }}" class="btn btn-sm">æŸ¥çœ‹</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p class="empty-state">æš‚æ— æ¨èæ•°æ®ã€‚ç­–ç•¥å°†åœ¨æ¯æ—¥ 05:30 è‡ªåŠ¨æ‰§è¡Œã€‚</p>
        {% endif %}
    </div>

    <!-- åˆ†ææŠ¥å‘Š -->
    {% if report_content %}
    <div class="card">
        <h3>ğŸ“Š æ¿å—åˆ†ææŠ¥å‘Š</h3>
        <div class="report-content">
            {{ report_content|safe }}
        </div>
    </div>
    {% endif %}

    <!-- ç­–ç•¥è¯´æ˜ -->
    <div class="card">
        <h3>ğŸ“ ç­–ç•¥é€»è¾‘</h3>
        <ul class="feature-list">
            <li>ğŸ‡ºğŸ‡¸ <strong>ç¾è‚¡æ¿å—æ‰«æ</strong>ï¼šæ¯æ—¥è¿½è¸ªS&P 11å¤§æ¿å—ETFæ¶¨è·Œ</li>
            <li>ğŸ”— <strong>è·¨å¸‚è”åŠ¨æ˜ å°„</strong>ï¼šå°†çƒ­é—¨ç¾è‚¡æ¿å—æ˜ å°„åˆ°Aè‚¡å¯¹åº”è¡Œä¸š</li>
            <li>ğŸ“ˆ <strong>æŠ€æœ¯é¢åˆç­›</strong>ï¼šMA5è¶‹åŠ¿å‘ä¸Š + é‡æ¯” + æˆäº¤é¢è¿‡æ»¤</li>
            <li>ğŸ¤– <strong>AIç²¾é€‰æ¨è</strong>ï¼šç»¼åˆæ¿å—å…³è”åº¦ä¸æŠ€æœ¯å¼ºåº¦ï¼Œç²¾é€‰5-8åª</li>
            <li>â° <strong>è‡ªåŠ¨æ‰§è¡Œ</strong>ï¼šæ¯æ—¥05:30ï¼ˆç¾è‚¡æ”¶ç›˜åï¼‰è‡ªåŠ¨è¿è¡Œ</li>
        </ul>
    </div>
</div>
{% endblock %}